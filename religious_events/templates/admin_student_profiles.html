{% extends 'base.html' %}

{% block title %}학생 프로필 조회 - 종교행사 관리 시스템{% endblock %}

{% block content %}
    <h2>학생 프로필 조회</h2>
    <form method="get">
        <label for="student_id">학생 ID:</label>
        <input type="text" id="student_id" name="student_id">
        <button type="submit">검색</button>
    </form>

    {% if search_performed %}
        {% if student %}
            <h3>학생 정보</h3>
            <table>
                <tr>
                    <th>학생 ID</th>
                    <td>{{ student.student_id }}</td>
                </tr>
                <tr>
                    <th>이름</th>
                    <td>{{ student.name }}</td>
                </tr>
                <tr>
                    <th>전화번호</th>
                    <td>{{ student.contact }}</td>
                </tr>
                <tr>
                    <th>학년</th>
                    <td>{{ student.grade }}</td>
                </tr>
                <tr>
                    <th>중대</th>
                    <td>{{ student.company }}</td>
                </tr>
            </table>

            <h3>활동 내역</h3>
            {% if activities %}
                <table>
                    <thead>
                        <tr>
                            <th>행사 ID</th>
                            <th>행사 이름</th>
                            <th>날짜</th>
                            <th>종교</th>
                            <th>예약 상태</th>
                            <th>참석 상태</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for activity in activities %}
                        <tr>
                            <td>{{ activity.event.event_id }}</td>
                            <td>{{ activity.event.name }}</td>
                            <td>{{ activity.event.date }}</td>
                            <td>{{ activity.event.get_religion_display }}</td>
                            <td>{{ activity.get_reservation_display }}</td>
                            <td>{{ activity.get_attendance_display }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>활동 내역이 없습니다.</p>
            {% endif %}
        {% else %}
            <p>해당 학생 프로필을 찾을 수 없습니다.</p>
        {% endif %}
    {% endif %}
{% endblock %}